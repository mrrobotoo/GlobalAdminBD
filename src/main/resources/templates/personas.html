<html xmlns="https://www.thymeleaf.org/">

<head>
	<meta charset="UTF-8">
	<title>Listas</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>

<body>

	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" th:href="@{/personas/nuevo}">Registro</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" th:href="@{/personas}">Lista de personas<span class="sr-only"></span></a>
				</li>
		</div>
	</nav>

	<!--TABLA-->
	<div class="container">
		<div class="row">
			<h1>Lista de personas</h1>
		</div>
		<!---->
		<div class="row">
			<div class="col-lg-3">
				<a th:href="@{/personas/nuevo}" class="btn btn-primary btn-sm mb3">Registrar</a>
			</div>
			<br>
			<br>
		</div>
		<table class="table table-bordered border-dark">
			<thead class="table-dark">
				<tr>
					<th>Nombre:</th>
					<th>Edad:</th>
					<th>Sexo:</th>
					<th> </th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="personas : ${personas}">
					<td th:text="${personas.nombre}">Nombre:</td>
					<td th:text="${personas.edad}">Edad:</td>
					<td th:text="${personas.sexo}">Sexo:</td>
					<td>
						<!--<a th:href="@{/personas/editar/{id}(id=${personas.id})}" class="btn btn-info">Editar</a>-->
						<a th:href="@{/personas/{id}(id=${personas.id})}" class="btn btn-danger">Eliminar</a>
						<!--AQUI EMPIEZA-->
						<a th:href="@{/personas/editar/{id}(id=${personas.id})}" onclick="mostrarPopup(event)"
							class="btn btn-info">Editar</a>
					<div id="popup" style="display: none;">
						<!-- Contenido del popup -->
						<div><a href="" class="btn btn-light" onclick="cerrarPopup(event)">X</a></div>
						<iframe id="popup-iframe" src=""></iframe>
					</div>

					<script>
						function mostrarPopup(event) {
							event.preventDefault(); // Evita que el enlace se abra directamente

							// Obtén la URL del enlace
							var url = event.target.getAttribute('href');

							// Crea el popup
							var popup = document.getElementById('popup');
							var iframe = document.getElementById('popup-iframe');
							iframe.src = url;
							popup.style.display = 'block';
						}

						function cerrarPopup(event) {
							event.preventDefault(); // Evita que el enlace se abra directamente

							var popup = document.getElementById('popup');
							var iframe = document.getElementById('popup-iframe');
							iframe.src = ""; // Limpiar la URL del iframe
							popup.style.display = 'none';
							window.close()
						}
					</script>
					<style>
						iframe {
							width: 400px;
							height: 400px;
							/*Sólo para que se vea, ya que la dirección al parecer está mal*/
							border: 5px solid green;
						}

						.a {
							border: 1px solid #FAFAFA;
							left: 100px;
							margin: 0;
						}
					</style>
					</td>
					


					<!--COLOCAR AQUI-->


					<!--ELIMINAR-->

					</td>

				</tr>

			</tbody>


		</table>

	</div>
	</div>
</body>

</html>